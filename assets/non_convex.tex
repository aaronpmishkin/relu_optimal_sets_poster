%! TEX root = ../../main.tex
%% Illustration of step-sizes bound from Armijo line-search. 

\begin{tikzpicture}[scale=1,
		declare function={
				objective(\x)=      (\x<=-1) * (2*\x*\x + 6*\x + 4)    +
				and(\x>-1, \x<=1) * (\x + 5 - pow(\x,3) - 5*\x*\x) / 4 +
				(\x>1) * (\x*\x - 5*\x + 4);
			}
	]
	\begin{axis}[
			width=0.9\textwidth,
			height=4cm,
			axis x line=none, axis y line=none,
			ymin=-3.25, ymax=5, ytick={-5,...,5}, ylabel=$y$,
			xmin=-5, xmax=7, xtick={-5,...,7}, xlabel=$x$,
		]

		\addplot[name path=function, domain=-3.5:5.23, samples=100, line width=2pt]{objective(x)};

        \node[label={[text=blue]90:$x^*$},circle,fill=blue,inner sep=2pt] at (axis cs:2.5,-2.25) {};
        \node[label={[text=red]90:$\tilde x$},circle,fill=red,inner sep=2pt] at (axis cs:0.09717,1.3) {};
        \node[label={[text=red]90:$\tilde x$},circle,fill=red,inner sep=2pt] at (axis cs:-1.5,-0.5) {};

		\node[label={0:$f(x)$}] at (axis cs:4.2,0.8) {};
	\end{axis}
\end{tikzpicture}

